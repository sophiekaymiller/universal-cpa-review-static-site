## Customize the test machine
machine:
  timezone:
    America/Los_Angeles # Set the timezone
  ruby:
    version:
      2.3.2
  python:
    version:
      2.7

dependencies:
  pre:
    - sudo apt-get update
    - pip install --upgrade setuptools
    - pip install cffi
    - pip install ansible
    - gem install jekyll --no-rdoc --no-ri

compile:
  override:
    - jekyll build

test:
  override:
    - echo 'NO TESTS'

deployment:
  production:
    tag: /.*?/
    commands:
      - mv _site _ansible/
      - ansible-playbook _ansible/site.yml -i _ansible/production -e "build=$CIRCLE_TAG"